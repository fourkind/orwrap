include:
  - project: 'IFHT/gitlab-ci-templates'
    file: '/python-package.yml'

variables:
  BUILD_REQUIRE: cython ortools

pytest:
  extends: .pytest

pylint:
  extends: .pylint

build_sdist:
  extends: .build_dist
  variables:
    GEN_DIST: sdist

build_dist_3.6:
  extends: .build_dist
  image: python:3.6

build_dist_3.7:
  extends: .build_dist
  image: python:3.7

build_dist_ppc_3.6:
  extends: .build_dist
  variables:
    CFLAGS: -std=c++11
  image: $CI_REGISTRY/docker/devpi-builder:3.6-ubuntu-ppc

build_dist_ppc_3.7:
  extends: .build_dist
  variables:
    CFLAGS: -std=c++11
  image: $CI_REGISTRY/docker/devpi-builder:3.7-ubuntu-ppc

release_dist:
  extends: .release_dist
